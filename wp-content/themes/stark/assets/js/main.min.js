jQuery(document).ready(function(a){"use-strict";function c(){a(".counter-group").each(function(b){var c=a(this);c.waypoint({handler:function(a){c.find(".timer:not(.counted)").countTo().addClass("counted"),this.destroy()},offset:"90%"})})}function d(){var b="",c=navigator.userAgent;(verOffset=c.indexOf("OPR/"))!=-1?b="opera":(verOffset=c.indexOf("MSIE"))!=-1?b="ie":(verOffset=c.indexOf("Edge"))!=-1?b="edge":(verOffset=c.indexOf("Chrome"))!=-1?b="chrome":(verOffset=c.indexOf("Safari"))!=-1?b="safari":(verOffset=c.indexOf("Firefox"))!=-1&&(b="firefox"),a("html").addClass(b)}function e(){a("html").addClass(window.navigator.platform)}function f(){var b=768;a("[data-stellar-background-ratio]").length>0&&a(window).on("resize load",function(){window.innerWidth<b?(a("html").removeClass("parallax-on"),a.stellar("destroy")):(a("html").addClass("parallax-on"),a.stellar({scrollProperty:"scroll",horizontalScrolling:!1,verticalScrolling:Modernizr.csstransitions,responsive:!0,parallaxBackgrounds:!0}))})}function g(){a(".chaffle").each(function(){a(this).chaffle({speed:20,time:60})})}function h(){function b(a,b){for(var c=1920,d=Math.floor(c/a),e=[],f=1;f<d+1;f++)e.push({breakpoint:a*f,settings:{slidesToShow:f,slidesToScroll:b===!0?f:1}});return e.push({breakpoint:9999,settings:{slidesToShow:d+1,slidesToScroll:b===!0?f:1}}),e}a(".slider").each(function(){function e(b){var c=b.find(".caption");c.each(function(){var b=a(this),c="1000ms";a(this).data("animation-duration")&&(c=a(this).data("animation-duration")+"ms"),a(this).css("animation-duration",c),b.addClass("caption-hide")})}function f(b){var c=b.find(".slick-active .caption");c.each(function(b){var c=a(this),d=a(this).data("caption-delay")||350*b+400,e=c.data("caption-animation")||"fadeInUp";setTimeout(function(){c.removeClass("caption-hide").addClass(e)},d)})}function g(b){var c=b.find(".slick-active .caption");c.each(function(){var b=a(this),c=b.data("caption-animation")||"fadeInUp";b.removeClass(c).addClass("caption-hide")})}var c={autoplay:!a(this).hasClass("no-autoplay"),fade:!a(this).hasClass("slide"),speed:a(this).data("animation-speed")||400,dots:a(this).hasClass("control-nav"),arrows:!!a(this).hasClass("direction-nav"),autoplaySpeed:a(this).data("autoplay-speed")||5e3,adaptiveHeight:!!a(this).hasClass("auto-height"),swipeToSlide:!!a(this).hasClass("swipe-to-slide"),infinite:!a(this).hasClass("no-loop")};if(a(this).data("item-width")){var d=parseInt(a(this).data("item-width"),10);c.respondTo="slider",a(this).hasClass("slide-all")?c.responsive=b(d,!0):c.responsive=b(d)}a(this).hasClass("caption-slider")&&(a(this).on("init",function(b,c){e(a(this)),f(a(this))}),a(this).on("beforeChange",function(b,c,d,e){g(a(this))}),a(this).on("afterChange",function(b,c,d){f(a(this))})),a(this).slick(c)})}function i(){a(".product-thumbnail-slider").each(function(){function h(a){var b=a;e.find(".slick-slide").removeClass("synced").eq(b).addClass("synced"),i(b)}function i(a){var b=a,c=!1,d=e.find(".slick-slide:last").index();for(var g in f)if(b===f[g])var c=!0;c===!1?b>f[f.length-1]?b==d?e.slick("slickGoTo",b-f.length+1):e.slick("slickGoTo",b-f.length+2):b-1===-1?e.slick("slickGoTo",0):e.slick("slickGoTo",b-1):b===f[f.length-1]?e.slick("slickGoTo",f[1]):b===f[0]&&e.slick("slickGoTo",b-1)}var c=a(this),d=c.find(".syn-slider-1"),e=c.find(".syn-slider-2");d.slick({infinite:!1,fade:!!d.hasClass("animation-fade"),speed:400,adaptiveHeight:!!d.hasClass("height-auto"),arrows:!!d.hasClass("dir-nav"),dots:!!d.hasClass("control-nav")}),d.on("beforeChange",function(a,b,c,d){h(d)});var f=[],g=0;e.on("init",function(b,c){a(this).find(".slick-slide").eq(0).addClass("synced");var d=window.innerWidth;d>=1020&&(g=4),d<1020&&(g=3);for(var e=0;e<g;e++)f.push(e)}),b.on("resize load",function(a){var b=window.innerWidth;return b>=1020&&(g=4),b<1020&&(g=3),g}),e.on("afterChange",function(a,b,c){f.length=0;for(var d=c;d<c+g;d++)f.push(d)}),e.slick({swipeToSlide:!0,infinite:!1,slidesToShow:4,slidesToScroll:1,speed:400,arrows:!!e.hasClass("direction-nav"),centerPadding:"0px",vertical:!!e.hasClass("v-mode"),verticalSwiping:!!e.hasClass("v-mode"),responsive:[{breakpoint:1230,settings:{slidesToShow:4,vertical:!1,verticalSwiping:!1}},{breakpoint:1020,settings:{slidesToShow:3,vertical:!1,verticalSwiping:!1}}]}),e.on("click",".slick-slide",function(b){b.preventDefault();var c=a(this).data("slick-index");d.slick("slickGoTo",c)})})}function j(){a(".isotope-container").each(function(){var b=a(this),c={layoutMode:"masonry",itemSelector:".grid-item",transitionDuration:"0.3s"};b.find(".grid-sizer").length>0&&(c.masonry={},c.masonry.columnWidth=".grid-sizer");var d=b.find(".isotope-grid").isotope(c);d.imagesLoaded().progress(function(){d.isotope("layout")});var e=b.find(".portfolio-filter");e.find(".filter-button").on("click",function(b){b.preventDefault(),d.isotope({filter:a(this).attr("data-filter")}),a(this).siblings().removeClass("is-checked"),a(this).addClass("is-checked")}),d.on("layoutComplete",function(){a(window).trigger("resize.px.parallax")})})}function k(){a(".masonry-container").each(function(){function h(a){var d=Math.floor(a/b);if(0===d)d=1;else if(d!=e){var f=1/d;c.children(".masonry-item").css({width:100*f+"%"})}}var b=parseInt(a(this).data("masonry-grid-width"),10)||370,c=a(this),d=c.innerWidth(),e=d/b,f={itemSelector:".masonry-item"},g=c.masonry(f);h(d),g.imagesLoaded().progress(function(){g.masonry("layout")}),a(window).on("resize",function(){var a=c.innerWidth();a!=d&&(h(a),d=a)}),g.on("layoutComplete",function(){a(window).trigger("resize.px.parallax")})})}function l(){a(".group-portfolio , .magnific-gallery").each(function(){a(this).magnificPopup({delegate:".zoom-button",type:"image",gallery:{enabled:!0},mainClass:"mfp-fade",zoom:{enabled:!a(this).hasClass("no-zoom-effect"),duration:300,easing:"ease-in-out",opener:function(a){return a.hasClass("img-wrapper")?a.find("img"):a.parents(".overlay")}}})})}function m(){a(".group-progressbar").each(function(){var b=a(this);b.waypoint({handler:function(a){b.find(".progressbar").progressbar({display_text:"center"}),this.destroy()},offset:"80%"})})}function n(){a(".piechart").each(function(){var b={segmentShowStroke:!1,responsive:!0},c=[];a(this).children(".pie-legend").children("li").each(function(){var b={},d=a(this);b.value=d.data("value"),b.color=d.children(".__color").css("background-color"),b.label=d.children(".__legend").html(),c.push(b)}),a(this).hasClass("doughnut")&&(b.percentageInnerCutout=55);var d=a(this).children(".chart").children("canvas").get(0).getContext("2d");new Chart(d).Pie(c,b)})}function o(){a(".easy-piechart").each(function(){var b=a(this),c=Number(b.data("value"))/100,d={strokeWidth:5,trailWidth:5,duration:1500,easing:"bounce",text:{value:"0%"},step:function(a,b){b.setText((100*b.value()).toFixed(0)+"%")}},e=new ProgressBar.Circle(a(this)[0],d);b.waypoint({handler:function(a){e.animate(c),this.destroy()},offset:"68%"})})}function p(b){function d(a){var b=window.innerWidth,c=0;return b>=480&&(c=a.data("xs")||c),b>=768&&(c=a.data("sm")||c),b>=1020&&(c=a.data("md")||c),b>=1230&&(c=a.data("lg")||c),b>=1400&&(c=a.data("xlg")||c),c}$children=b.children(".cover-box");var c=0;a(window).on("resize load",function(){var a=d(b);0===a?($children.removeClass("active").addClass("normal-style").css({width:"100%","margin-right":"0%"}),c=a):a!==c&&(1===a?($children.initBox(a),$children.activeBox(a)):($children.initBox(a),$children.filter(function(b){return b%a===0&&b/a%2===0||(b-1)%a===0&&(b-1)/a%2===1}).activeBox(a)),c=a)}),$children.on("mouseover",function(){var c=d(b);if(c>0&&!a(this).hasClass("active")){var e=parseInt(a(this).index()/c,10)*c;$children.slice(e,e+c).deactiveBox(),a(this).activeBox(c)}}),a.fn.initBox=function(b){a(this).removeClass("active normal-style"),a(this).css({width:100/(b+1)+"%","margin-right":"0%"})},a.fn.activeBox=function(b){a(this).addClass("active"),a(this).css("margin-right",100/(b+1)+"%")},a.fn.deactiveBox=function(){a(this).removeClass("active"),a(this).css("margin-right","0")}}function q(){a(".cover-box-container").each(function(){p(a(this))})}function r(){function c(){var a={zoom:11,scrollwheel:!1,center:new google.maps.LatLng(40.67,-73.94),styles:[{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d3d3d3"}]},{featureType:"transit",stylers:[{color:"#808080"},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#b3b3b3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:1.8}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ebebeb"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#a7a7a7"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#efefef"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#696969"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#737373"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d6d6d6"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#dadada"}]}]},c=document.getElementById("map"),d=new google.maps.Map(c,a);new google.maps.Marker({position:new google.maps.LatLng(40.6,-73.94),map:d,title:"Megatron",icon:b}),new google.maps.Marker({position:new google.maps.LatLng(40.68,-73.8),map:d,title:"Megatron",icon:b}),new google.maps.Marker({position:new google.maps.LatLng(40.73,-74.128),map:d,title:"Megatron",icon:b})}var b="assets/images/logo/map-marker.png";a("#map").length>0&&(void 0!=a("#map").attr("data-marker-image")&&(b=a("#map").attr("data-marker-image")),google.maps.event.addDomListener(window,"load",c))}function s(){a('.os-menu a[href="#"]').on("click",function(a){a.preventDefault()}),a(".os-menu li").has("ul").addClass("li-node").parent().addClass("ul-node"),a(".os-menu .mega-menu:not(.menu-fullwidth)").parent().css("position","relative")}function t(){a("#back-to-top-btn").length>0&&(a("#back-to-top-btn").on("click",function(){a("html,body").animate({scrollTop:0},400)}),a(window).on("scroll",function(){a(this).scrollTop()>=a("#page-body").position().top?a("#back-to-top-btn").addClass("show-this"):a("#back-to-top-btn").removeClass("show-this")}))}function u(){if(a(".nav-fixed").length>0){var b=a("body"),c=a("#page-body");a(window).on("scroll , load",function(){var d=a(this).scrollTop();d>1&&!b.hasClass("$body")?b.addClass("nav-fixed-transformed"):b.removeClass("nav-fixed-transformed"),d>=c.position().top?b.addClass("nav-fixed-appeared"):b.removeClass("nav-fixed-appeared")})}}function v(){a('.easing-link-group a[href^="#"] , a.easing-link[href^="#"]').not('[href="#"]').on("click",function(b){b.preventDefault();var c=a(this),d=a(c.attr("href")).offset().top;a("html,body").animate({scrollTop:d},400,function(){a("body").removeClass("mobile-nav-open")})})}function w(){a(".nav-sticky").each(function(){new Waypoint.Sticky({element:a(this)[0]})})}function x(){a(".select-menu").each(function(){a(this).selectmenu()})}function y(){function e(){a("body").removeClass("mobile-nav-open"),setTimeout(function(){b.find("li.active").removeClass("active")},300)}var b=a(".mobile-menu"),c=b.find("li").has("ul").children("a"),d=b.find("li ul");c.on("click",function(){a(this).closest("li").addClass("active"),a(this).closest("ul").addClass("active")}),d.prepend('<li class="__back"><a href="#">НАЗАД</a></li>'),d.find(".__back a").on("click",function(b){b.preventDefault(),a(this).closest("li.active").removeClass("active"),a(this).closest("ul.active").removeClass("active")}),a(".mobile-nav-toggle").on("click",function(b){b.preventDefault(),a("body").hasClass("mobile-nav-open")?e():a("body").addClass("mobile-nav-open")}),a(window).on("resize",function(){window.innerWidth>=992&&a("body").removeClass("mobile-nav-open")})}function z(){a(".offcanvas-nav-toggle").on("click",function(b){b.preventDefault(),a("body").toggleClass("offcanvas-nav-open")}),a(window).on("resize",function(){window.innerWidth<1230&&a("body").removeClass("offcanvas-nav-open")})}function A(){a(".shop-sidebar-toggle").each(function(){a(this).on("click",function(b){b.preventDefault(),a("body").toggleClass("shop-sidebar-open")}),a(window).on("resize",function(){window.innerWidth<1230&&a("body").removeClass("shop-sidebar-open")})})}function B(){a(".nav-menu-popup").hide(),a(".nav-menu-popup-trigger").each(function(){a(this).on("click",function(){event.preventDefault(event),a("body").toggleClass("nav-menu-popup-open"),a(".nav-menu-popup").fadeToggle()})})}function C(){a(".accordion").each(function(){var b=a(this);b.accordion({active:b.data("ui-active")||0,animate:b.data("ui-animate")||300,collapsible:!0,header:".accordion-header",heightStyle:b.data("ui-height-style")||"auto",icons:!1}),a(window).on("resize load",function(){b.accordion("refresh")})})}function D(){a(".expendable-section").each(function(){var c=(a(this),a(this).children(".expendable-section-header"));c.hasClass("header-active")||c.next(".expendable-section-body").hide(),c.on("click",function(b){b.preventDefault();var c=a(this).next(".expendable-section-body");a(this).hasClass("header-active")&&c.is(":visible")?(a(this).removeClass("header-active"),c.slideUp(400)):(a(this).addClass("header-active"),c.slideDown(400))})})}function E(){a(".toggle-block-container").each(function(){var b=a(this),c=b.find(".toggle-block-target");c.hide(),b.find(".toggle-block-trigger").on("click",function(a){a.preventDefault(),c.slideToggle(300)})})}function F(){a(".price-filter").each(function(){String.prototype.toDec=function(){return parseInt(this,10)};var b=a(this).find(".price-slider-range"),c=a(this).find("span.from"),d=a(this).find("span.to"),e=a(this).data("min")||0,f=a(this).data("max")||400,g=a(this).data("from")||1,h=a(this).data("to")||200;b.slider({range:!0,min:e,max:f,values:[g,h],slide:function(a,b){c.text(b.values[0]),d.text(b.values[1])}}),c.text(b.slider("values",0)),d.text(b.slider("values",1))})}function G(){a(".countdown-clock").each(function(){var b=a(this).data("final-time");a(this).countdown(b,function(b){a(this).html(b.strftime("<div><span>%m</span>Months</div><div><span>%d</span>Days </div><div><span>%H</span>Hours</div><div><span>%M</span>Minutes</div><div><span>%S</span>Seconds</div>"))})})}function H(){function b(b,c){var d=window.innerWidth-a(window).width();a("html").css({overflow:"hidden","padding-right":d+"px"}),a(".product-thumbnail-slider").length>0&&(a(".product-thumbnail-slider .syn-slider-1").slick("setDimensions"),a(".product-thumbnail-slider .syn-slider-2").slick("setDimensions")),a(".modal").length>0&&a(".modal").on("mousewheel",function(a){var b=a.originalEvent,c=b.wheelDelta||-b.detail;this.scrollTop+=30*(c<0?1:-1),a.preventDefault()}),a(".jquery-modal.blocker").length>0&&a(".jquery-modal.blocker").on("mousewheel",function(a){a.preventDefault()})}function c(b,c){a("html").css({overflow:"","padding-right":""})}a.modal&&(a.modal.defaults={overlay:"#000",opacity:.7,zIndex:1140,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",showClose:!0,modalClass:"modal",spinnerHtml:'<i class="fa fa-refresh fa-spin"></i>',showSpinner:!0,fadeDuration:300,fadeDelay:0},a(document).on(a.modal.OPEN,b),a(document).on(a.modal.CLOSE,c),a(window).on("resize",function(){a.modal.resize()})),a("a[data-modal-open]").on("click",function(b){b.preventDefault(),a(this).modal()}),a("a[data-modal-close]").on("click",function(){return a.modal.close(),!1})}function I(){a(".star-ratings").each(function(){var b=parseInt(a(this).attr("data-rating"),10);5===b?a(this).children("span").addClass("rated"):a(this).children().eq(b).prevAll().addClass("rated")})}function J(){a(".tabs").each(function(){var b=a(this);if(null!=a(this).data("ui-disable"))var c=a(this).data("ui-disable").split(",").map(function(a){return parseInt(a,10)});b.tabs({active:b.data("active")||0,hide:{effect:"fadeOut",duration:100},show:{effect:"fadeIn",duration:100},disabled:c})})}function K(){a(".quantity-input").each(function(){a(this).find("button").on("click",function(b){b.preventDefault();var c=a(this),d=c.parents(".quantity-input").find("input.number").val();if(c.hasClass("add"))var e=parseFloat(d)+1;if(c.hasClass("subract"))if(d>0)var e=parseFloat(d)-1;else e=0;c.parents(".quantity-input").find("input.number").val(e)})})}function x(){a(".select-menu").each(function(){var b=a(this),c=b.parent(".select-wrapper").data("menu-class");b.selectmenu({icons:{button:a(this).data("ui-icon")||"icon-down-open-big"}}),void 0!==c&&b.selectmenu("menuWidget").addClass(c),a(window).on("resize load",function(){b.selectmenu("refresh")})})}function L(){wow=new WOW({boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0}),wow.init()}function M(){a("#contact_form").on("submit",function(b){b.preventDefault();var c=a(this).find('button[type="submit"]'),d=c.html(),e=a(this).serialize();c.html("PROCESSING").attr("disabled","disabled"),a.ajax({type:"POST",url:"phpscript/contact.php",data:e,success:function(a){""==a?(c.html('SUCCESSFUL <i class="fa fa-check"></i>'),setTimeout(function(){c.removeAttr("disabled").html(d)},2e3)):(alert(a),c.removeAttr("disabled").html(d))}})})}function N(){a("#particles-js").length>0&&particlesJS("particles-js",{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}var b=a(window);c(),d(),e(),f(),g(),h(),i(),j(),k(),l(),m(),n(),o(),q(),r(),s(),t(),u(),v(),w(),x(),y(),z(),A(),B(),C(),D(),E(),F(),G(),H(),I(),J(),K(),x(),L(),M(),N(),a(document).on("scroll",function(){var b=0,c=+a(this).scrollTop(),d=+a("div.main-nav")[0].offsetTop,e=+a(".__middle")[0].clientHeight;c<e+d&&(b+=e+d-c),a(".top-panel-header").css("top",b)}),a(document).trigger("scroll"),a("#contact").submit(function(){var b=a(this).serialize();return a.ajax({type:"POST",url:"wp-content/themes/stark/template-parts/mail.php",data:b,success:function(b){"OK"==b?(result='<div class="ok">Спасибо. Ваша скидка 10%. Мы Вас ожидаем.</div>',a("#fields").hide(),a("#submit").hide()):result=b,a("#note").html(result)}}),!1})}),window.onload=function(){MaskedInput({elm:document.getElementById("phone"),format:"+375 (__) ___-__-__",separator:"+375 ()-"})},function(a){a.MaskedInput=function(b){if(!b||!b.elm||!b.format)return null;if(!(this instanceof a.MaskedInput))return new a.MaskedInput(b);var c=this,d=b.elm,e=b.format,f=b.allowed||"0123456789",g=b.allowedfx||function(){return!0},h=b.separator||"/:-",i=b.typeon||"_YMDhms",j=b.onbadkey||function(){},k=b.onfilled||function(){},l=b.badkeywait||0,m=!b.hasOwnProperty("preserve")||!!b.preserve,n=!0,o=!1,p=e,q=function(){return window.addEventListener?function(a,b,c,d){a.addEventListener(b,c,void 0!==d&&d)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a["on"+b]=c}}(),r=function(){for(var a=d.value.length-1;a>=0;a--)for(var b=0,c=i.length;b<c;b++)if(d.value[a]===i[b])return!1;return!0},s=function(a){try{if(a.focus(),a.selectionStart>=0)return a.selectionStart;if(document.selection){var b=document.selection.createRange();return-b.moveStart("character",-a.value.length)}return-1}catch(a){return-1}},t=function(a,b){try{if(a.selectionStart)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.move("character",b),c.select()}}catch(a){return!1}return!0},u=function(a){a=a||window.event;var b="",c=a.which,d=a.type;if(void 0!==c&&null!==c||(c=a.keyCode),void 0===c||null===c)return"";switch(c){case 8:b="bksp";break;case 46:b="keydown"===d?"del":".";break;case 16:b="shift";break;case 0:case 9:case 13:b="etc";break;case 37:case 38:case 39:case 40:b=a.shiftKey||39===a.charCode||void 0===a.charCode?String.fromCharCode(c):"etc";break;default:b=String.fromCharCode(c)}return b},v=function(a,b){a.preventDefault&&a.preventDefault(),a.returnValue=b||!1},w=function(a){var b=s(d),c=d.value,k="",l=!0;switch(l){case f.indexOf(a)!==-1:if(b+=1,b>e.length)return!1;for(;h.indexOf(c.charAt(b-1))!==-1&&b<=e.length;)b+=1;if(!g(a,b))return j(a),!1;k=c.substr(0,b-1)+a+c.substr(b),f.indexOf(c.charAt(b))===-1&&i.indexOf(c.charAt(b))===-1&&(b+=1);break;case"bksp"===a:if(b-=1,b<0)return!1;for(;f.indexOf(c.charAt(b))===-1&&i.indexOf(c.charAt(b))===-1&&b>1;)b-=1;k=c.substr(0,b)+e.substr(b,1)+c.substr(b+1);break;case"del"===a:if(b>=c.length)return!1;for(;h.indexOf(c.charAt(b))!==-1&&""!==c.charAt(b);)b+=1;k=c.substr(0,b)+e.substr(b,1)+c.substr(b+1),b+=1;break;case"etc"===a:return!0;default:return!1}return d.value="",d.value=k,t(d,b),!1},x=function(a){if(f.indexOf(a)===-1&&"bksp"!==a&&"del"!==a&&"etc"!==a){var b=s(d);return o=!0,j(a),setTimeout(function(){o=!1,t(d,b)},l),!1}return!0},y=function(a){if(!n)return!0;if(a=a||event,o)return v(a),!1;var b=u(a);return!a.metaKey&&!a.ctrlKey||"X"!==b&&"V"!==b?!(!a.metaKey&&!a.ctrlKey)||(""===d.value&&(d.value=e,t(d,0)),"bksp"!==b&&"del"!==b||(w(b),v(a),!1)):(v(a),!1)},z=function(a){if(!n)return!0;if(a=a||event,o)return v(a),!1;var b=u(a);return!!("etc"===b||a.metaKey||a.ctrlKey||a.altKey)||"bksp"!==b&&"del"!==b&&"shift"!==b&&(x(b)?w(b)?(r()&&k(),v(a,!0),!0):(r()&&k(),v(a),!1):(v(a),!1))},A=function(){return!d.tagName||"INPUT"!==d.tagName.toUpperCase()&&"TEXTAREA"!==d.tagName.toUpperCase()?null:(m&&""!==d.value||(d.value=e),q(d,"keydown",function(a){y(a)}),q(d,"keypress",function(a){z(a)}),q(d,"focus",function(){p=d.value}),q(d,"blur",function(){d.value!==p&&d.onchange&&d.onchange()}),c)};return c.resetField=function(){d.value=e},c.setAllowed=function(a){f=a,c.resetField()},c.setFormat=function(a){e=a,c.resetField()},c.setSeparator=function(a){h=a,c.resetField()},c.setTypeon=function(a){i=a,c.resetField()},c.setEnabled=function(a){n=a},A()}}(window);